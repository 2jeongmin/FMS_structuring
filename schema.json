{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "전담시설물 평가 결과 스키마 (최종)",
  "description": "시설물의 안전관리 필요성 및 관리주체 역량 평가 결과 - 2025.11.19 최종 수정",
  "type": "object",
  "required": ["facility_info", "scoring_result", "evaluation_date"],
  "properties": {
    "facility_info": {
      "type": "object",
      "description": "평가 대상 시설물의 기본 정보",
      "required": [
        "facility_type",
        "scale",
        "safety_grade",
        "years_in_service",
        "critical_defect_count",
        "is_security_facility",
        "is_critical_infrastructure",
        "new_tech_applicable",
        "special_structure"
      ],
      "properties": {
        "facility_name": {
          "type": "string",
          "description": "시설물 명칭"
        },
        "facility_number": {
          "type": "string",
          "description": "시설물 번호 (예: BR1973-0000008)"
        },
        "facility_type": {
          "type": "string",
          "description": "시설물 종류",
          "examples": ["도로교량", "철도교량", "터널", "댐", "건축물", "상하수도", "하천", "항만", "옹벽", "절토사면", "공동구"]
        },
        "facility_classification": {
          "type": "string",
          "description": "시설물 등급",
          "enum": ["제1종 시설물", "제2종 시설물", "제3종 시설물"]
        },
        "location_detail": {
          "type": "string",
          "description": "시설물 상세 위치 (시/도, 시/군/구)"
        },
        "management_organization": {
          "type": "string",
          "description": "관리주체"
        },
        "construction_date": {
          "type": "string",
          "format": "date",
          "description": "준공일 (YYYY-MM-DD)"
        },
        "scale": {
          "type": "object",
          "description": "시설물 규모 (시설물 유형별로 1~2개 기준)",
          "properties": {
            "total_length": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "max_span": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "area": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "height": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "width": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "capacity": {
              "type": "object",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"}
              }
            },
            "lanes": {
              "type": "integer",
              "description": "차로수 (터널)"
            }
          }
        },
        "safety_grade": {
          "type": "string",
          "description": "현재 안전등급",
          "enum": ["A", "B", "C", "D", "E"]
        },
        "safety_grade_history": {
          "type": "array",
          "description": "안전등급 변화 이력 (최근 10년)",
          "items": {
            "type": "object",
            "properties": {
              "year": {"type": "integer"},
              "grade": {"type": "string", "enum": ["A", "B", "C", "D", "E"]}
            }
          }
        },
        "years_in_service": {
          "type": "integer",
          "description": "공용년수 (준공 이후 경과 연수)",
          "minimum": 0
        },
        "climate_change_data": {
          "type": "object",
          "description": "기후변화 시나리오 기반 극한 강우 데이터",
          "properties": {
            "rcp60_extreme_rainfall": {
              "type": "object",
              "description": "RCP6.0 시나리오 극한 강우 강도",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"},
                "is_above_average": {"type": "boolean"},
                "increase_rate": {"type": "number", "description": "증가율 (%)"}
              }
            },
            "ssp245_extreme_rainfall": {
              "type": "object",
              "description": "SSP2-4.5 시나리오 극한 강우 강도",
              "properties": {
                "value": {"type": "number"},
                "unit": {"type": "string"},
                "is_above_average": {"type": "boolean"},
                "increase_rate": {"type": "number", "description": "증가율 (%)"}
              }
            }
          }
        },
        "critical_defect_count": {
          "type": "integer",
          "description": "반복적인 중대결함 발생 총 횟수",
          "minimum": 0
        },
        "critical_defect_details": {
          "type": "array",
          "description": "중대결함 상세 내용",
          "items": {"type": "string"}
        },
        "population_data": {
          "type": "object",
          "description": "시설물 소재지 인구 데이터",
          "properties": {
            "city_population": {
              "type": "integer",
              "description": "시/도 단위 인구수"
            },
            "district_population_density": {
              "type": "number",
              "description": "시/군/구 단위 인구밀도 (명/km²)"
            }
          }
        },
        "is_security_facility": {
          "type": "boolean",
          "description": "보안시설물 해당 여부"
        },
        "is_critical_infrastructure": {
          "type": "boolean",
          "description": "국가핵심기반시설 해당 여부"
        },
        "new_tech_applicable": {
          "type": "boolean",
          "description": "안전점검 신기술 적용 가능성"
        },
        "new_tech_details": {
          "type": "string",
          "description": "적용 가능한 신기술 상세"
        },
        "special_structure": {
          "type": "boolean",
          "description": "신형식/신공법 적용 특수 구조물 여부"
        },
        "special_structure_details": {
          "type": "string",
          "description": "특수 구조물 상세 설명"
        },
        "management_compliance_data": {
          "type": "object",
          "description": "관리주체 법정 의무 이행 데이터 (최근 5년)",
          "properties": {
            "inspection_compliance": {
              "type": "object",
              "description": "점검/진단/성능평가 이행 현황",
              "properties": {
                "on_time_count": {"type": "integer", "description": "기한 내 제출 건수"},
                "delayed_count": {"type": "integer", "description": "지연 제출 건수"},
                "not_submitted_count": {"type": "integer", "description": "미제출 또는 미이행 건수"}
              }
            },
            "management_plan_compliance": {
              "type": "object",
              "description": "시설물관리계획서 제출 현황",
              "properties": {
                "on_time_count": {"type": "integer", "description": "기한 내 제출 건수"},
                "delayed_count": {"type": "integer", "description": "지연 제출 건수"},
                "not_submitted_count": {"type": "integer", "description": "미제출 건수"}
              }
            }
          }
        },
        "report_quality_data": {
          "type": "object",
          "description": "보고서 품질 평가 데이터 (최근 5년)",
          "properties": {
            "total_reports": {"type": "integer", "description": "전체 보고서 수"},
            "inadequate_reports": {"type": "integer", "description": "부적정 보고서 수"},
            "inadequacy_rate": {"type": "number", "description": "부적정률 (%)"},
            "corrected_reports": {"type": "integer", "description": "시정 완료 보고서 수"},
            "uncorrected_reports": {"type": "integer", "description": "미시정 보고서 수"},
            "correction_rate": {"type": "number", "description": "시정률 (%)"}
          }
        }
      }
    },
    "scoring_result": {
      "type": "object",
      "description": "평가 점수 산출 결과",
      "required": [
        "functionality_score",
        "risk_score",
        "publicness_score",
        "security_score",
        "new_tech_score",
        "total_score_a",
        "compliance_score",
        "quality_score",
        "total_score_b",
        "total_score"
      ],
      "properties": {
        "functionality_score": {
          "type": "number",
          "description": "기능성 점수 (상대평가)",
          "minimum": 0,
          "maximum": 15
        },
        "functionality_evaluation": {
          "type": "string",
          "description": "기능성 평가 근거 및 순위 정보"
        },
        "risk_score": {
          "type": "number",
          "description": "위험성 총점",
          "minimum": 0,
          "maximum": 40
        },
        "risk_breakdown": {
          "type": "object",
          "description": "위험성 세부 점수",
          "properties": {
            "disaster_possibility_score": {
              "type": "number",
              "description": "재난발생 가능성",
              "minimum": 0,
              "maximum": 15
            },
            "disaster_possibility_evaluation": {"type": "string"},
            "safety_grade_change_score": {
              "type": "number",
              "description": "안전등급 변화 추이",
              "minimum": 0,
              "maximum": 15
            },
            "safety_grade_change_evaluation": {"type": "string"},
            "repeated_critical_defect_score": {
              "type": "number",
              "description": "반복적인 중대결함 발생 이력",
              "minimum": 0,
              "maximum": 10
            },
            "repeated_critical_defect_evaluation": {"type": "string"}
          }
        },
        "publicness_score": {
          "type": "number",
          "description": "공공성 점수",
          "minimum": 0,
          "maximum": 10
        },
        "publicness_evaluation": {
          "type": "string",
          "description": "공공성 평가 근거 (인구수, 인구밀도 기준)"
        },
        "security_score": {
          "type": "number",
          "description": "보안성 점수",
          "minimum": 0,
          "maximum": 5
        },
        "security_evaluation": {
          "type": "string",
          "description": "보안성 평가 근거"
        },
        "new_tech_score": {
          "type": "number",
          "description": "신기술성 점수",
          "minimum": 0,
          "maximum": 10
        },
        "new_tech_evaluation": {
          "type": "string",
          "description": "신기술성 평가 근거"
        },
        "total_score_a": {
          "type": "number",
          "description": "A항목 총점 (안전관리 필요성)",
          "minimum": 0,
          "maximum": 80
        },
        "compliance_score": {
          "type": "number",
          "description": "안전의무 이행 점수 (B-1)",
          "minimum": 0,
          "maximum": 10
        },
        "compliance_breakdown": {
          "type": "object",
          "description": "안전의무 이행 세부 점수",
          "properties": {
            "inspection_compliance_score": {
              "type": "number",
              "description": "법정 안전점검 및 성능평가 이행 및 결과 제출",
              "minimum": 0,
              "maximum": 5
            },
            "inspection_compliance_evaluation": {"type": "string"},
            "management_plan_score": {
              "type": "number",
              "description": "시설물 안전 및 유지관리 계획 적기 제출",
              "minimum": 0,
              "maximum": 5
            },
            "management_plan_evaluation": {"type": "string"}
          }
        },
        "quality_score": {
          "type": "number",
          "description": "안전성과 관리의 전문성 점수 (B-2)",
          "minimum": 0,
          "maximum": 10
        },
        "quality_breakdown": {
          "type": "object",
          "description": "안전성과 관리의 전문성 세부 점수",
          "properties": {
            "inadequacy_score": {
              "type": "number",
              "description": "점검 및 진단보고서 평가결과의 부적정",
              "minimum": 0,
              "maximum": 5
            },
            "inadequacy_evaluation": {"type": "string"},
            "correction_score": {
              "type": "number",
              "description": "점검 및 진단보고서 평가결과의 시정",
              "minimum": 0,
              "maximum": 5
            },
            "correction_evaluation": {"type": "string"}
          }
        },
        "total_score_b": {
          "type": "number",
          "description": "B항목 총점 (관리주체 안전관리 역량)",
          "minimum": 0,
          "maximum": 20
        },
        "total_score": {
          "type": "number",
          "description": "총점 (A+B)",
          "minimum": 0,
          "maximum": 100
        },
        "total_score_out_of": {
          "type": "number",
          "description": "만점 기준",
          "const": 100
        },
        "evaluation_grade": {
          "type": "string",
          "description": "종합 평가 등급",
          "enum": ["상", "중", "하"]
        },
        "evaluation_summary": {
          "type": "string",
          "description": "종합 평가 요약"
        }
      }
    },
    "recommendations": {
      "type": "object",
      "description": "권고사항",
      "properties": {
        "priority": {
          "type": "string",
          "description": "관리 우선순위",
          "enum": ["최우선", "우선", "중순위", "일반"]
        },
        "suggested_actions": {
          "type": "array",
          "description": "권장 조치사항",
          "items": {"type": "string"}
        },
        "notes": {
          "type": "array",
          "description": "참고사항",
          "items": {"type": "string"}
        }
      }
    },
    "evaluation_date": {
      "type": "string",
      "format": "date",
      "description": "평가일 (YYYY-MM-DD)"
    },
    "evaluation_criteria_version": {
      "type": "string",
      "description": "적용한 평가기준 버전",
      "const": "수정된 평가항목 및 세부배점 (2025.11.19 최종)"
    },
    "data_sources": {
      "type": "array",
      "description": "데이터 출처",
      "items": {"type": "string"}
    }
  }
}